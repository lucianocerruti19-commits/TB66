<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mozo</title>

<style>
body{margin:0;background:#000;font-family:Arial;color:#D4AF37}
.logo{text-align:center;margin-top:30px}
.logo img{width:220px}
.linea{height:4px;background:#D4AF37;margin:25px 0}
.container{padding:20px}
.card{background:#111;padding:20px;border-radius:20px;margin-bottom:15px}
button{background:#c79c2c;border:none;padding:12px;border-radius:10px;width:100%}
</style>
</head>
<body>

<div class="logo"><img src="logo.png"></div>
<div class="linea"></div>

<div class="container" id="mesas"></div>

<script type="module">
import { db } from "./firebase.js";
import { collection,onSnapshot,doc,updateDoc }
from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const div=document.getElementById("mesas");

onSnapshot(collection(db,"pedidos"),snap=>{
div.innerHTML="";
snap.forEach(d=>{
const data=d.data();
if(data.estado==="listo"){
div.innerHTML+=`
<div class="card">
<h2>${data.mesa}</h2>
<h3>Total: $${data.total}</h3>
<button onclick="cobrar('${d.id}')">Cobrar</button>
</div>`;
}
});
});

window.cobrar=async(id)=>{
await updateDoc(doc(db,"pedidos",id),{estado:"cobrado"});
}
</script>

</body>
</html>